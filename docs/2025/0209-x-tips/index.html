<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">

  <meta name="keywords" content="シャポログ ${blog.article_keywords}">
  <meta name="description" content="X 関連の雑多なメモ。随時追加する">

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@shapoco" />
  <meta property="og:url" content="https://blog.shapoco.net/2025/0209-x-tips/" />
  <meta property="og:title" content="[メモ] X (旧Twitter) 備忘録 | シャポログ" />
  <meta property="og:description" content="X 関連の雑多なメモ。随時追加する" />
  <meta property="og:image" content="https://blog.shapoco.net/2025/0209-x-tips/thumbnail.png" />

  <link rel="icon" href="https://blog.shapoco.net/favicon192.png" sizes="192x192">
  <link rel="apple-touch-icon" href="https://blog.shapoco.net/apple-touch-icon180.png" sizes="180x180">
  <link rel="shortcut icon" href="https://blog.shapoco.net/favicon48.ico">

  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-KJ53WNQ22G"></script>
  <script>
    var remoteHost = window.location.hostname;
    if (remoteHost == "localhost") {
      console.log(`Google Analytics disabled on: '${remoteHost}'`);
    }
    else {
      window.dataLayer = window.dataLayer || [];
      function gtag() { dataLayer.push(arguments); }
      gtag('js', new Date());
      gtag('config', 'G-KJ53WNQ22G');
    }
  </script>

  <link href="/style.css?0ec49c72" rel="stylesheet" type="text/css">
  <script src="/style.js?0fd56873"></script>

  <link href="https://www.shapoco.net/navi/style.css?20241202163100" rel="stylesheet" type="text/css">
  <script src="https://www.shapoco.net/navi/navi.js?20241202163100"></script>

  <title>[メモ] X (旧Twitter) 備忘録 | シャポログ</title>
</head>

<body>
  <div id="container">
    <div id="root_navi"></div>

    <header class="article_header">
      <h1><a href="/">シャポログ</a></h1>
    </header>
    <main>
      <h2>[メモ] X (旧Twitter) 備忘録</h2>

      <div class="article_info_wrap">
        <div class="article_info">
          2025/02/09 |
          <a href="https://github.com/shapoco/blog/tree/main/src/article/2025/0209-x-tips/" target="_blank">記事のソース</a>
        </div>

        <div id="shpcstamp_wrap"></div>
        <script async src="/stamp/v1/widget.js?ce7d3635"></script>
      </div>

              <p>X 関連の雑多なメモ。随時追加する</p>
        <h3>検索クエリ (検索コマンド)</h3>
        <h4>演算式</h4>
        <table>
          <tr>
            <th>式</th>
            <th>説明</th>
            <th>例</th>
          </tr>
          <tr>
            <td><code>hoge piyo</code></td>
            <td><code>hoge</code> と <code>piyo</code> を両方含む</td>
            <td><a href="https://x.com/search?q=%E3%82%AB%E3%83%AC%E3%83%BC+%E3%81%86%E3%81%A9%E3%82%93" target="_blank">カレー うどん</a></td>
          </tr>
          <tr>
            <td><code>hoge OR piyo</code></td>
            <td><code>hoge</code> または <code>piyo</code> を含む</td>
            <td><a href="https://x.com/search?q=%E3%83%A9%E3%83%BC%E3%83%A1%E3%83%B3+OR+%E3%81%86%E3%81%A9%E3%82%93" target="_blank">ラーメン OR うどん</a></td>
          </tr>
          <tr>
            <td><code>&quot;hogepiyo&quot;</code></td>
            <td><code>hogepiyo</code> に完全一致</td>
            <td><a href="https://x.com/search?q=%22%E3%82%AB%E3%83%AC%E3%83%BC%E3%81%86%E3%81%A9%E3%82%93%22" target="_blank">"カレーうどん"</a><br>(<code>カレーうどん</code> のみにヒットし <code>カレーとうどん</code> などにはヒットしない)</td>
          </tr>
          <tr>
            <td><code>-hoge</code></td>
            <td><code>hoge</code> を含まない</td>
            <td><a href="https://x.com/search?q=%E3%82%AB%E3%83%AC%E3%83%BC+%E3%81%86%E3%81%A9%E3%82%93+-%22%E3%82%AB%E3%83%AC%E3%83%BC%E3%81%86%E3%81%A9%E3%82%93%22" target="_blank">カレー うどん -"カレーうどん"</a><br>(<code>カレー</code> と <code>うどん</code> を両方含むが <code>カレーうどん</code> は含まない)</td>
          </tr>
        </table>
        <h4>オプション</h4>
        <table>
          <tr>
            <th>オプション</th>
            <th>説明</th>
            <th>例</th>
          </tr>
          <tr>
            <td><code>from:ID</code></td>
            <td><code>@ID</code> による投稿</td>
            <td><a href="https://x.com/search?q=from%3Ashapoco" target="_blank">from:shapoco</a></td>
          </tr>
          <tr>
            <td><code>to:ID</code></td>
            <td><code>@ID</code> への返信</td>
            <td><a href="https://x.com/search?q=to%3Ashapoco" target="_blank">to:shapoco</a></td>
          </tr>
          <tr>
            <td><code>filter:media</code></td>
            <td>メディア付き (※1)</td>
            <td><a href="https://x.com/search?q=from%3Ashapoco+filter%3Amedia" target="_blank">from:shapoco filter:media</a></td>
          </tr>
          <tr>
            <td><code>filter:images</code></td>
            <td>画像付き</td>
            <td><a href="https://x.com/search?q=from%3Ashapoco+filter%3Aimages" target="_blank">from:shapoco filter:images</a></td>
          </tr>
          <tr>
            <td><code>filter:videos</code></td>
            <td>動画付き (※1)</td>
            <td><a href="https://x.com/search?q=from%3Ashapoco+filter%3Avideos" target="_blank">from:shapoco filter:videos</a></td>
          </tr>
          <tr>
            <td><code>filter:links</code></td>
            <td>メディア (※1) またはリンク付き</td>
            <td><a href="https://x.com/search?q=from%3Ashapoco+filter%3Alinks" target="_blank">from:shapoco filter:links</a></td>
          </tr>
          <tr>
            <td><code>list:リストID</code></td>
            <td>リスト内から検索 (※2, ※3)</td>
            <td><a href="https://x.com/search?q=list%3A858198697032564736%20%E3%82%AB%E3%83%AC%E3%83%BC%E3%81%86%E3%81%A9%E3%82%93&src=typed_query&f=live" target="_blank">list:858198697032564736 カレーうどん</a></td>
          </tr>
          <tr>
            <td><code>lang:言語コード</code></td>
            <td><a href="https://so-zou.jp/web-app/tech/data/code/language.htm" target="_blank">言語コード</a> による言語指定</td>
            <td><a href="https://x.com/search?q=lang%3Aja" target="_blank">lang:ja</a>, <a href="https://x.com/search?q=lang%3Aen" target="_blank">lang:en</a></td>
          </tr>
          <tr>
            <td><code>since:YYYY-MM-DD</code></td>
            <td>投稿日が <code>YYYY-MM-DD</code> 以降</td>
            <td><a href="https://x.com/search?q=from%3Ashapoco+since%3A2025-1-1" target="_blank">from:shapoco since:2025-1-1</a></td>
          </tr>
          <tr>
            <td><code>until:YYYY-MM-DD</code></td>
            <td>投稿日が <code>YYYY-MM-DD</code> 以前</td>
            <td><a href="https://x.com/search?q=from%3Ashapoco+until%3A2024-12-31" target="_blank">from:shapoco until:2024-12-31</a></td>
          </tr>
          <tr>
            <td><code>min_retweets:N</code></td>
            <td>リポスト数が <code>N</code> 以上</td>
            <td><a href="https://x.com/search?q=from%3Ashapoco+min_retweets%3A1000" target="_blank">from:shapoco min_retweets:1000</a></td>
          </tr>
          <tr>
            <td><code>min_faves:N</code></td>
            <td>いいね数が <code>N</code> 以上</td>
            <td><a href="https://x.com/search?q=from%3Ashapoco+min_faves%3A1000" target="_blank">from:shapoco min_faves:1000</a></td>
          </tr>
          <tr>
            <td><code>near:場所 within:距離km</code></td>
            <td><code>場所</code> から <code>距離</code> km 以内</td>
            <td>(2025/2/9: 機能してない？)</td>
          </tr>
          <tr>
            <td><code>geocode:緯度,経度,距離km</code></td>
            <td><a href="https://www.geosense.co.jp/map/tool/geoconverter.php" target="_blank">ジオコード</a> の場所から <code>距離</code> km 以内</td>
            <td><a href="https://x.com/search?q=geocode%3A45.522192%2C141.936642%2C1km%20filter%3Amedia&f=live" target="_blank">geocode:45.522192,141.936642,1km filter:media</a><br>(「最新」タブでないと機能しない？)</td>
          </tr>
        </table>
        <p>※1 「メディア」や「動画」には YouTube リンクも含まれる</p>
        <p>
          ※2 リスト ID はリストの URL の末尾の数字の部分<br>
          例) <a href="https://x.com/i/lists/858198697032564736" target="_blank">https://x.com/i/lists/858198697032564736</a> のリスト ID: <code>858198697032564736</code>
        </p>
        <p>※3 ときどき無関係なポストも混ざる模様</p>
        <h3>フォロワーの TL に流れないようにこっそりポストする</h3>
        <p>凍結済みアカウントへのリプライは基本的にフォロワーのホームタイムラインには表示されないので、目立たないようにポストしたり引用したりすることができる。</p>
        <p>それっぽい ID の凍結済みユーザーの例: (2025/04/05 現在)</p>
        <ul>
          <li><a href="https://x.com/secret" target="_blank">@secret</a></li>
          <li><a href="https://x.com/hidden" target="_blank">@hidden</a></li>
          <li><a href="https://x.com/test" target="_blank">@test</a></li>
        </ul>
        <p>注意点:</p>
        <ul>
          <li>あくまでホーム TL に流れなくなるだけであって、プロフィールページの返信タブや <a href="https://x.com/search?q=from%3Ashapoco%20to%3Ahidden" target="_blank">検索</a> から見つかるかもしれないし、RP による拡散は防げない。</li>
          <li>凍結された ID 宛てでないとダメで、最初から存在してない ID 宛てだとフォロワーのホーム TL に流れてしまう。</li>
          <li>凍結された ID だと思ってたら他の誰かが取得してたみたいなことがあるかもしれないので、投稿毎に確認が必要。</li>
        </ul>
        <h3>通知を送らずに引用する</h3>
        <p>例えば対象ポストの URL が <a href="https://x.com/shapoco/status/1897261591160328414" target="_blank">https://x.com/shapoco/status/1897261591160328414</a> の場合は <a href="https://x.com/i/web/status/1897261591160328414" target="_blank">https://x.com/i/web/status/1897261591160328414</a> のような URL に整形して引用する。(2025/04/05)</p>
        <h3>ユーザー ID</h3>
        <p>一般的に「ID」と呼ばれているもの (<code>@shapoco</code> など) は正式には screen name という。</p>
        <p>「ユーザー ID」は screen name と関係無くアカウントを一意に識別する数字。例えば <a href="https://x.com/shapoco" target="_blank">@shapoco</a> のユーザー ID は <code>858142314849378304</code>。screen name は変更できるが、ユーザー ID は変更できない。</p>
        <p>ユーザー ID はいずれも数字の羅列だが、2016 年 2～3 月頃を境に桁数が大幅に増えている。新形式のユーザー ID の値はアカウント作成日時と概ね一次相関している。新形式のユーザー ID を 16 進数にすると下位 12 bit の分布に偏りが見られ、0x000 が最も多く、数が大きくなるにつれて出現頻度は少なくなる。</p>
        <p>何のためか分からないが <code>https://x.com/i/user/ユーザーID</code> がそのユーザーのプロフィールページへ転送されるようになっているので、ユーザー ID から screen name は簡単に分かる (<a href="https://x.com/i/user/858142314849378304" target="_blank">例</a>)。</p>
        <p>screen name からユーザー ID を得るのは以前は API を使うことができたが、今は有料化されてやや難しくなっている。</p>
        <h4>外部サービス利用してユーザー ID を取得する</h4>
        <ul>
          <li><a href="https://develop.tools/x-idcheck/" target="_blank">X(Twitter) IDチェッカー</a><br>※ なぜか取得できない場合もある</li>
        </ul>
        <h4>プロフィールページの DOM からユーザー ID を取得する (Web版)</h4>
        <ol>
          <li><code>data-testid=&quot;UserProfileSchema-test&quot;</code> なる属性を持つ <code>script</code> 要素を見つける (複数存在する場合がある)。</li>
          <li><code>innerText</code> を JSON としてパースする。</li>
          <li><code>(JSON obj).mainEntity.additionalName</code> が目的の screen name に一致することを確認し、一致しない場合は次の <code>script</code> 要素を調べる。</li>
          <li>screen name が一致する場合、<code>(JSON obj).mainEntity.identifier</code> にユーザー ID が格納されている。</li>
        </ol>
        <p>上記手順をブックマークレット化した。</p>
        <ol>
          <li>
            <p>以下のコードを URL としてブックマークレットを作成する</p>
            <pre class="lang_js">javascript:(function(){try{const sn=window.location.href.match(/x\.com\/(\w+)(\/(with_replies|media)\/?)?(\?.+)?$/)[1];const ss=Array.from(document.querySelectorAll(&#39;script&#39;)).filter(elem=&gt;elem.dataset&amp;&amp;elem.dataset.testid===&#39;UserProfileSchema-test&#39;);for(const s of ss){const e=JSON.parse(s.innerText).mainEntity;if(e.additionalName!==sn) continue;const url=`https://x.com/i/user/${e.identifier}#${sn}`;console.log(`URL: &#39;${url}&#39;`);navigator.clipboard.writeText(url).then(function(){window.alert(`URL copied to clipboard:\n${url}`);},function(){window.alert(`URL: &#39;${url}&#39;\n(Failed to copy to clipboard)`);});return;}throw new Error(`User ID not found for ${sn}.`);}catch(e){window.alert(`Failed. (${e})`);}})()</pre>
          </li>
          <li>対象ユーザのプロフィールページを開く</li>
          <li>作成したブックマークレットを開く<br>( <code>https://x.com/i/user/&lt;user ID&gt;#&lt;screen name&gt;</code> の形式でクリップボードにコピーされる)</li>
        </ol>
        <p>(2025/03/18 更新)</p>
        <h4>フォローボタンの属性からユーザー ID を得る (Web版)</h4>
        <p>フォローボタン (<code>button</code> 要素) の <code>data-testid</code> 属性が正規表現 <code>/(\d+)-(un)?(follow|block)/</code> にマッチする場合、<code>(\d+)</code> の部分がユーザー ID にあたる。</p>
        <p>こちらの方法だと、フォロー一覧/フォロワー一覧/アカウント検索結果などのページから、そこに表示されているユーザーの ID をまとめて得られる。</p>
        <p>(2025/03/18 更新)</p>
        <h3>細々したの</h3>
        <h4>プロフィールの改行</h4>
        <p>Web 版のプロフィール編集画面で改行を使うと Web 版には反映されるが、アプリでは半角スペースになる。(2025/03/19)</p>
        <h4>Twitter Card Validator</h4>
        <p><a href="https://cards-dev.x.com/validator" target="_blank">Card Validator | Twitter Developers</a></p>
        <p>プレビューは機能していないが、OGP 画像の更新自体は機能する。(2025/02/22)</p>
        <h4>メディア欄の空白は YouTube のリンク</h4>
        <p>メディア欄にところどころある空白は YouTube のリンクの投稿。</p>
        <p><code>from:自分のID filter:media</code> で検索すると、メディア欄で空白だったところに YouTube のリンクが貼られた投稿があるのが分かる。</p>
        <h4>「自分がメンバーとなっているリスト」が数件しか表示されない (PC)</h4>
        <p>どれかのリストを開いたあとブラウザバックすると続きが表示される。バグ？</p>

    </main>
    <footer>
      <span class="nowrap">
        Copyright &copy; <a href="https://x.com/shapoco/" target="_blank">Shapoco</a>,
      </span>
      <span class="nowrap">
        Powered by <a href="https://pages.github.com/" target="_blank">GitHub Pages</a>
      </span>
    </footer>
  </div>
</body>

</html>